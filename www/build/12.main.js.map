{"version":3,"sources":["../../src/pages/linea-Ruta/linea-ruta.module.ts","../../src/pages/linea-Ruta/linea-ruta.ts"],"names":[],"mappings":"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","file":"12.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { LineaRuta } from './linea-ruta';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LineaRuta,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(LineaRuta),\r\n    TranslateModule\r\n  ],\r\n  exports: [\r\n    LineaRuta\r\n  ]\r\n})\r\nexport class LineaRutaModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/linea-Ruta/linea-ruta.module.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { AlertController } from 'ionic-angular';\r\nimport { Network } from '@ionic-native/network';\r\nimport { ToastController } from 'ionic-angular';\r\nimport { KaypiServices } from '../../providers/kaypi-services';\r\nimport { Platform } from 'ionic-angular';\r\n\r\ndeclare var google;\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'linea-ruta',\r\n  templateUrl: 'linea-ruta.html',\r\n})\r\nexport class LineaRuta {\r\n\r\n  @ViewChild('map') mapElement: ElementRef;\r\n  map: any;\r\n  linea: any;\r\n  nombreLinea: any;\r\n  rutas: any;\r\n  flightPath: any;\r\n  allRutas: any;\r\n  opcion: string;\r\n  puntosSelecion: any;\r\n  sentido: any;\r\n  colorFondo: string;\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public servicio: KaypiServices,\r\n    public navParams: NavParams,\r\n    public network: Network,\r\n    public toastCtrl: ToastController,\r\n    public alertCtrl: AlertController,\r\n    public platform: Platform) {\r\n    this.opcion = \"\";\r\n    this.puntosSelecion = this.navParams.get('Puntos');\r\n    this.linea = this.navParams.get('Linea');\r\n    this.sentido = this.navParams.get('Sentido');\r\n    this.nombreLinea = this.linea.Nombre;\r\n    this.colorFondo = this.servicio.modoApp;\r\n  }\r\n\r\n  presentToast(mensaje) {\r\n    let toast = this.toastCtrl.create({\r\n      message: mensaje,\r\n      duration: 3000\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  cargarLinea() {\r\n    this.nombreLinea = this.linea.Nombre;\r\n    this.rutas = this.linea.Rutas;\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.platform.registerBackButtonAction(() => {\r\n      this.navCtrl.pop();\r\n    });\r\n    this.cargarLinea();\r\n    this.initMap();\r\n    this.cargarAllRutas();\r\n    if (this.sentido != null) {\r\n      for (let i = 0; i < this.rutas.length; i++) {\r\n        if (this.rutas[i].Sentido[0] == this.sentido.SentV || this.rutas[i].Sentido[0] == this.sentido.SentH) {\r\n          this.removeLine(this.rutas[i]);\r\n          this.mostrarMarcadores();\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    if (this.puntosSelecion != null) {\r\n      this.mostrarMarcadores();\r\n    }\r\n  }\r\n\r\n  mostrarMarcadores() {\r\n    var marker = new google.maps.Marker({\r\n      position: this.puntosSelecion.Punto1,\r\n      icon: 'img/BusquedaUbicacion/Marcadores/marcadorIni.png',\r\n      map: this.map\r\n    });\r\n    if (this.puntosSelecion.Punto2 != null) {\r\n      var marker2 = new google.maps.Marker({\r\n        position: this.puntosSelecion.Punto2,\r\n        icon: 'img/BusquedaUbicacion/Marcadores/marcadorFin.png',\r\n        map: this.map\r\n      });\r\n    }\r\n  }\r\n\r\n  cargarAllRutas() {\r\n    if (this.opcion != \"todos\") {\r\n      if (this.flightPath != undefined) {\r\n        this.flightPath.setMap(null);\r\n      }\r\n      this.allRutas = [];\r\n      this.opcion = \"todos\";\r\n      for (let i = 0; i < this.rutas.length; i++) {\r\n        var linePath = new google.maps.Polyline({\r\n          path: this.rutas[i].Puntos,\r\n          geodesic: true,\r\n          strokeColor: this.cargarColor(this.rutas[i].Color),\r\n          strokeOpacity: 1.0,\r\n          strokeWeight: 2\r\n        });\r\n        this.allRutas.push(linePath);\r\n        linePath.setMap(this.map);\r\n      }\r\n      this.flightPath = this.allRutas[0];\r\n    }\r\n  }\r\n\r\n  animateCircle(line) {\r\n    var count = 0;\r\n    window.setInterval(function () {\r\n      count = (count + 1) % 200;\r\n      var icons = line.get('icons');\r\n      icons[0].offset = (count / 2) + '%';\r\n      line.set('icons', icons);\r\n    }, 20);\r\n  }\r\n\r\n  removeAllRutas() {\r\n    for (let i = 0; i < this.rutas.length; i++) {\r\n      this.allRutas[i].setMap(null);\r\n    }\r\n  }\r\n\r\n  goToBusquedaPorCalles() {\r\n    this.navCtrl.push('BusquedaCallePage');\r\n  }\r\n\r\n  cargarRuta(ruta) {\r\n    var lineSymbol = {\r\n      path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,\r\n      scale: 3,\r\n      strokeColor: '#488aff'\r\n    };\r\n    this.flightPath = new google.maps.Polyline({\r\n      path: ruta.Puntos,\r\n      icons: [{\r\n        icon: lineSymbol,\r\n        offset: '100%'\r\n      }],\r\n      geodesic: true,\r\n      strokeColor: this.cargarColor(ruta.Color),\r\n      strokeOpacity: 1.0,\r\n      strokeWeight: 2\r\n    });\r\n    this.animateCircle(this.flightPath);\r\n    this.flightPath.setMap(this.map);\r\n    this.opcion = \"\";\r\n  }\r\n\r\n  cargarColor(color) {\r\n    var result = '';\r\n    if (color == \"secondary\") {\r\n      result = '#32DB64';\r\n    } else if (color == \"danger\") {\r\n      result = '#F53D3D';\r\n    } else if (color == \"dark\") {\r\n      result = '#222222';\r\n    }\r\n    return result;\r\n  }\r\n\r\n  removeLine(ruta) {\r\n    if (this.opcion == \"todos\") {\r\n      this.removeAllRutas();\r\n    } else {\r\n      this.flightPath.setMap(null);\r\n    }\r\n    this.cargarRuta(ruta);\r\n  }\r\n\r\n  initMap() {\r\n    let latLng = new google.maps.LatLng(-17.393835, -66.156946);\r\n    let mapOptions = {\r\n      center: latLng,\r\n      zoom: 13,\r\n      mapTypeId: google.maps.MapTypeId.ROADMAP\r\n    };\r\n    this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/linea-Ruta/linea-ruta.ts"],"sourceRoot":""}